{% extends "base.html" %}
{% block head %}
<title> Diary - {{date}} </title>
{% endblock %}

{% block body %}
<p>
    <relative-time datetime="{{timestamp.to_rfc3339()}}" format="datetime" hour="numeric" minute="2-digit">
        {{timestamp}}
    </relative-time>
</p>
<p class="unobtrusive">
    Timestamp: {{timestamp}}
</p>

<hr />

<script>
    let entryHash = "{{text_hash}}";
    const docHashKey = "web-diary-rs-draft-doc-hash"
    const docKey = "web-diary-rs-draft-doc";
    const storage = window.localStorage;

    const storedHash = storage.getItem(docHashKey);
    if (storedHash != null && storedHash == entryHash) {
        storage.removeItem(docHashKey);
        storage.removeItem(docKey);
    }
</script>
{{body|safe}}
{% endblock %}